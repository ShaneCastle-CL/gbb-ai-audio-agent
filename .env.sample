# Environment Configuration Template
# Copy this file to .env and replace with your actual values
# Or, allow `azd up` to generate one for you as part of the postprovisioning automation
# =================================================================

# Azure Tenant Configuration
AZURE_TENANT_ID=12345678-1234-1234-1234-123456789abc
BACKEND_AUTH_CLIENT_ID=your-backend-auth-client-id

# Application Insights Configuration
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=12345678-1234-1234-1234-123456789abc;IngestionEndpoint=https://region.in.applicationinsights.azure.com/;LiveEndpoint=https://region.livediagnostics.monitor.azure.com/;ApplicationId=12345678-1234-1234-1234-123456789abc

# Azure OpenAI Configuration
AZURE_OPENAI_KEY=your-azure-openai-api-key
AZURE_OPENAI_ENDPOINT=https://your-openai-resource.openai.azure.com/
AZURE_OPENAI_DEPLOYMENT=gpt-4o
AZURE_OPENAI_API_VERSION=2025-01-01-preview
AZURE_OPENAI_CHAT_DEPLOYMENT_ID=gpt-4o
AZURE_OPENAI_CHAT_DEPLOYMENT_VERSION=2024-10-01-preview

# Azure Speech Services Configuration
# For transcription, require a speech endpoint with a custom domain (not the generic regional endpoint)
AZURE_SPEECH_ENDPOINT=https://your-speech-resource.cognitiveservices.azure.com/
AZURE_SPEECH_KEY=your-azure-speech-service-key
AZURE_SPEECH_RESOURCE_ID=/subscriptions/12345678-1234-1234-1234-123456789abc/resourceGroups/your-resource-group/providers/Microsoft.CognitiveServices/accounts/your-speech-resource
AZURE_SPEECH_REGION=your-region

# Base URL Configuration
# Your Dev Tunnel base URL or public endpoint
BASE_URL=https://your-tunnel-url.devtunnels.ms
TTS_ENABLE_LOCAL_PLAYBACK=false

# Azure Communication Services (ACS) Configuration
ACS_CONNECTION_STRING=endpoint=https://your-acs-resource.communication.azure.com/;accesskey=your-acs-access-key
ACS_SOURCE_PHONE_NUMBER=+1234567890
ACS_ENDPOINT=https://your-acs-resource.communication.azure.com

# Redis Configuration
REDIS_HOST=your-redis-host.redis.azure.net
REDIS_PORT=6380
REDIS_PASSWORD=your-redis-password

# Azure Storage Configuration
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=yourstorageaccount;AccountKey=your-storage-key;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER_URL=https://yourstorageaccount.blob.core.windows.net/your-container
AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount

# Azure Cosmos DB Configuration
AZURE_COSMOS_DATABASE_NAME=your-database-name
AZURE_COSMOS_COLLECTION_NAME=your-collection-name
AZURE_COSMOS_CONNECTION_STRING=mongodb+srv://your-cosmos-account.mongocluster.cosmos.azure.com/?tls=true&authMechanism=MONGODB-OIDC&retrywrites=false&maxIdleTimeMS=120000

# Azure Identity Configuration
AZURE_SUBSCRIPTION_ID=12345678-1234-1234-1234-123456789abc

# Azure Resource Configuration
AZURE_RESOURCE_GROUP=your-resource-group
AZURE_LOCATION=your-region

# Application Configuration
ACS_STREAMING_MODE=media
ENVIRONMENT=development

# Logging Configuration
LOG_LEVEL=INFO

# Pool Configuration - Coordinated for 50 concurrent sessions
POOL_SIZE_TTS=50
POOL_SIZE_STT=50

# Media Realtime Orchestrator Configs (api/v1/handlers/acs_media_handler.py)
MAX_CONCURRENT_AUDIO_TASKS=50          # Reduced from 500 for better performance
MAX_EMERGENCY_AUDIO_TASKS=100          # Emergency threshold
AUDIO_PROCESSING_TIMEOUT_MS=50         # 50ms timeout per chunk
AUDIO_BUFFER_SIZE=20                   # Emergency buffer size

# Azure Monitor Configuration
AZURE_MONITOR_DISABLE_LIVE_METRICS=false

# Enable/disable the AOAI client pool for concurrent session optimization
# Set to "false" to use the original shared client approach
# Set to "true" to enable session-specific client allocation
AOAI_POOL_ENABLED=true
AOAI_USE_SESSION_POOL=true

# Number of client instances in the pool (balanced for startup speed vs. concurrency)
# For high-concurrency production: set to 50+. For balanced performance: 10-20
AOAI_POOL_SIZE=10

# AOAI Pool Monitoring (optional)
# Set to "true" to enable detailed pool performance logging
AOAI_POOL_DEBUG=True
